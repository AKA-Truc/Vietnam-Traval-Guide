<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý post</title>
    <link rel="stylesheet" href="../../../public/css/Admin/post_management.css">
    <link rel="stylesheet" href="../../../public/css/navbar.css">
    <link rel="stylesheet" href="../../../public/css/sidebar.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</head>
<body>
    <script src="../../../public/js/Admin/post_management.js"></script>
    <script src="../../../include/navbar.js"></script>
    <script src="../../../include/sidebar.js"></script>


<div class="main-content">
    <div class="post-management">
        <button class="add-post-btn" id="openpopup1">
            Thêm Bài Đăng <ion-icon style="margin-left: 5px;" name="add-circle-outline"></ion-icon>
        </button>

        <div class="search-container">
            <input type="text" placeholder="Tìm kiếm bài viết" class="search-bar">
            <ion-icon name="search-outline" class="search-icon"></ion-icon>
        </div>

        <div class="table-wrapper" >
            <table style="width: 100%; border-collapse: collapse;">
                <thead>
                    <tr>
                        <th>PostID</th>
                        <th>Tỉnh thành</th>
                        <th>Ngày tạo</th>
                        <th>Đường dẫn ảnh</th>
                        <th>Lựa Chọn</th>
                    </tr>
                </thead>
                <tbody id="post-table-body">
                    <!-- Dữ liệu mẫu -->
                    <tr onclick="toggleDestinations(1)">
                        <td>P001</td>
                        <td>Hà Nội</td>
                        <td>11/11/2024</td>
                        <td>https://icloud.com/pic1.png</td>
                        <td class="action-btn-frame">
                            <button class="action-btn edit" id="edit-btn">
                                <ion-icon name="create"></ion-icon>
                            </button>
                            <button class="action-btn delete">
                                <ion-icon name="trash"></ion-icon>
                            </button>
                        </td>
                    </tr>
                    <!-- Bảng con ẩn chứa các điểm đến -->
                    <tr class="destination-row" id="destinations-1" style="display: none;">
                        <td colspan="5">
                            <div class="destination-table-wrapper">
                                <table class="destination-table">
                                    <thead>
                                        <tr>
                                            <th>PostDetailID</th>
                                            <th>Tiêu đề tiểu mục</th>
                                            <th>Nội dung</th>
                                            <th>Đường dẫn ảnh</th>
                                            <th>Lựa Chọn</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>PD001</td>
                                            <td>Hồ Hoàn Kiếm</td>
                                            <td>Biểu tượng của thủ đô Hà Nội</td>
                                            <td>https://icloud.com/pic1.png</td>
                                            <td class="action-btn-frame">
                                                <button class="action-btn edit" id="edit-btn">
                                                    <ion-icon name="create"></ion-icon>
                                                </button>
                                                <button class="action-btn delete">
                                                    <ion-icon name="trash"></ion-icon>
                                                </button>
                                            </td>
                    
                                        </tr>
                                        <tr>
                                            <td>PD002</td>
                                            <td>Hồ Hoàn Kiếm</td>
                                            <td>Biểu tượng của thủ đô Hà Nội</td>
                                            <td>https://icloud.com/pic1.png</td>
                                            <td class="action-btn-frame">
                                                <button class="action-btn edit" id="edit-btn">
                                                    <ion-icon name="create"></ion-icon>
                                                </button>
                                                <button class="action-btn delete">
                                                    <ion-icon name="trash"></ion-icon>
                                                </button>
                                            </td>
                    
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr>

                    <tr onclick="toggleDestinations(2)">
                        <td>2</td>
                        <td>Đà Nẵng</td>
                        <td>Cầu Rồng</td>
                        <td>Xe buýt, xe máy</td>
                        <td class="action-btn-frame">
                            <button class="action-btn edit" id="edit-btn">
                                <ion-icon name="create"></ion-icon>
                            </button>
                            <button class="action-btn delete">
                                <ion-icon name="trash"></ion-icon>
                            </button>
                        </td>
                    </tr>

                <!-- Bảng con ẩn chứa các điểm đến -->
                <tr class="destination-row" id="destinations-2" style="display: none;">
                    <td colspan="5">
                        <div class="destination-table-wrapper">
                            <table class="destination-table">
                                <thead>
                                    <tr>
                                        <th>PostDetailID</th>
                                        <th>Tiêu đề tiểu mục</th>
                                        <th>Nội dung</th>
                                        <th>Đường dẫn ảnh</th>
                                        <th>Lựa Chọn</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>PD001</td>
                                        <td>Hồ Hoàn Kiếm</td>
                                        <td>Biểu tượng của thủ đô Hà Nội</td>
                                        <td>https://icloud.com/pic1.png</td>
                                        <td class="action-btn-frame">
                                            <button class="action-btn edit" id="edit-btn">
                                                <ion-icon name="create"></ion-icon>
                                            </button>
                                            <button class="action-btn delete">
                                                <ion-icon name="trash"></ion-icon>
                                            </button>
                                        </td>
                
                                    </tr>
                                    <tr>
                                        <td>PD002</td>
                                        <td>Hồ Hoàn Kiếm</td>
                                        <td>Biểu tượng của thủ đô Hà Nội</td>
                                        <td>https://icloud.com/pic1.png</td>
                                        <td class="action-btn-frame">
                                            <button class="action-btn edit" id="edit-btn">
                                                <ion-icon name="create"></ion-icon>
                                            </button>
                                            <button class="action-btn delete">
                                                <ion-icon name="trash"></ion-icon>
                                            </button>
                                        </td>
                
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </td>
                </tr>
                    

                </tbody>
            </table>
            

            <div id="popup" class="popup-overlay">
                <div class="popup-content">
                    <p>Are you sure you want to delete this post?</p>
                    <button id="yes-btn" class="popup-btn">Yes</button>
                    <button id="no-btn" class="popup-btn">No</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="popup1-overlay" id="popup1Overlay">
    <div class="popup1-content">
        <ion-icon name="close-outline" class="popup1-close" id="closepopup1"></ion-icon>

        <div class="wrapper" id="addUser">
            <form id="post-form" enctype="multipart/form-data">

                <div class="field">
                    <label for="city">Tỉnh/Thành phố</label>
                    <select name="province" id="province">
                        <option value="">Hà Nội</option>
                        <option value="">Huế</option>
                        <option value="">Đà Nẵng</option>
                        <option value="">Quảng Trị</option>
                        <option value="">Quảng Ngãi</option>
                        <option value="">Quảng Nam</option>
                        <option value="">Thanh Hóa</option>
                        <option value="">Bà Rịa</option>
                        <option value="">Thành phố Hồ Chí Minh</option>
                    </select>
                </div>
                <div class="field">
                    <label for="postImage">Ảnh cho bài post</label>
                    <input type="file" id="image-address" name="image-address">
                </div>
                <div class="field-row" id = "field-row">
                    <div class="button-add">
                        <button class="add-postDT-btn"type="button" onclick="addSmallForm()">Thêm tiểu mục <ion-icon style="margin-left: 5px;" name="add-circle-outline"></ion-icon></button>
                    </div>    
                    <div id="small-forms-container">
                        <div class="field">
                            <label for="transport">Tiêu đề của tiểu mục 1</label>
                            <textarea wrap="soft" id="transport" name="transport" required></textarea>
                        </div>
    
                        <div class="field">
                            <label for="transport">Nội dung của tiểu mục 1</label>
                            <textarea wrap="soft" id="transport" name="transport" required></textarea>
                        </div>
                        <div class="field">
                            <label for="food">Ảnh cho tiểu mục 1</label>
                            <input type="file" id="image-food" name="image-food">
                        </div>    
                    </div>
                </div>

                <div class="button">
                    <input type="submit" value="Lưu" class="save" id="saveButton">
                    <input type="button" value="Hủy" class="cancel" id="cancelButton">
                </div>
            </form>
        </div>
    </div>
</div>

<div class="popup1-overlay" id="popup2Overlay">
    <div class="popup1-content">
        <ion-icon name="close-outline" class="popup1-close" id="closepopup2"></ion-icon>

        <div class="wrapper" id="addUser">
            <form id="post-form" enctype="multipart/form-data">
                
                <div class="field">
                    <label for="province">Tỉnh/Thành phố</label>
                    <input type="text" id="province" name="province" placeholder="Nhập tỉnh/thành phố">
                </div>
                <div class="field-row">
                    <div class="field">
                        <label for="destination">Điểm đến</label>
                        <textarea type="text" id="destination" name="destination" placeholder="Nhập điểm đến"></textarea>
                        <input type="file" id="image-address" name="image-address">
                    </div>
                    <div class="field">
                        <label for="transport">Di chuyển</label>
                        <textarea wrap="soft" id="transport" name="transport" required></textarea>
                        <input type="file" id="image-transport" name="image-transport">
                    </div>
                    <div class="field">
                        <label for="food">Ẩm thực</label>
                        <textarea wrap="soft" id="food" name="food" required></textarea>
                        <input type="file" id="image-food" name="image-food">
                    </div>
                    <div class="field">
                        <label for="festival">Lễ hội</label>
                        <textarea wrap="soft" id="festival" name="festival" required></textarea>
                        <input type="file" id="image-festival" name="image-festival">
                    </div>
                </div>

                <div class="button">
                    <input type="submit" value="Lưu" class="save" id="saveButton2">
                    <input type="button" value="Hủy" class="cancel" id="cancelButton2">
                </div>
            </form>
        </div>
    </div>
</div>

<script>
    let formIndex = 1;

    function addSmallForm() {
        formIndex++;

        const smallForm = document.createElement("div");
        smallForm.className = "small-form";
        smallForm.id = `small-form-${formIndex}`;

        smallForm.innerHTML = `
            <div id = "small-forms-container">
                <div class="field">
                    <label for="transport-title-${formIndex}">Tiêu đề của tiểu mục ${formIndex}</label>
                    <textarea wrap="soft" id="transport-title-${formIndex}" name="transport-title-${formIndex}" required></textarea>
                </div>
                <div class="field">
                    <label for="transport-content-${formIndex}">Nội dung của tiểu mục ${formIndex}</label>
                    <textarea wrap="soft" id="transport-content-${formIndex}" name="transport-content-${formIndex}" required></textarea>
                </div>
                <div class="field">
                    <label for="food-${formIndex}">Ảnh cho tiểu mục ${formIndex}</label>
                    <input type="file" id="image-food-${formIndex}" name="image-food-${formIndex}">
                    <button class = "delete-postDT-btn" type="button" onclick="removeSmallForm(${formIndex})">Xóa tiểu mục <ion-icon name="close-outline" class="create-post-close"></ion-icon></button>
                </div>
            </div>
        `;

        document.getElementById("field-row").appendChild(smallForm);
    }

    function removeSmallForm(index) {
        const confirmation = confirm("Bạn có chắc chắn muốn xóa tiểu mục này?");
        if (confirmation) {
            const formToRemove = document.getElementById(`small-form-${index}`);
            if (formToRemove) {
                formToRemove.remove();
            }
        }    }
</script>

</body>
</html>